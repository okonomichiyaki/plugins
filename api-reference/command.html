<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Commands | LipSurf Plugin Developer Documentation</title>
    <meta name="generator" content="VuePress 1.6.0">
    
    <meta name="description" content="Documentation for developers looking to extend LipSurf using the official API. Create voice commands and shortcuts for the browser.">
    <link rel="preload" href="/assets/css/0.styles.8c9187ac.css" as="style"><link rel="preload" href="/assets/js/app.31a506d3.js" as="script"><link rel="preload" href="/assets/js/3.c7b5409f.js" as="script"><link rel="preload" href="/assets/js/12.8e55b08a.js" as="script"><link rel="prefetch" href="/assets/js/10.e6fc54fb.js"><link rel="prefetch" href="/assets/js/11.54146e2c.js"><link rel="prefetch" href="/assets/js/13.da048a74.js"><link rel="prefetch" href="/assets/js/14.5830d13a.js"><link rel="prefetch" href="/assets/js/15.7b9d69f6.js"><link rel="prefetch" href="/assets/js/16.914c33a8.js"><link rel="prefetch" href="/assets/js/17.6da71c3d.js"><link rel="prefetch" href="/assets/js/18.0aab84d8.js"><link rel="prefetch" href="/assets/js/19.577e2dc9.js"><link rel="prefetch" href="/assets/js/20.a357f736.js"><link rel="prefetch" href="/assets/js/21.be6b56ea.js"><link rel="prefetch" href="/assets/js/22.b50900e7.js"><link rel="prefetch" href="/assets/js/23.74b5c641.js"><link rel="prefetch" href="/assets/js/24.6b982306.js"><link rel="prefetch" href="/assets/js/25.d43436aa.js"><link rel="prefetch" href="/assets/js/4.e2a48551.js"><link rel="prefetch" href="/assets/js/5.27175400.js"><link rel="prefetch" href="/assets/js/6.45a2d2e8.js"><link rel="prefetch" href="/assets/js/7.198e0538.js"><link rel="prefetch" href="/assets/js/8.db16cae3.js"><link rel="prefetch" href="/assets/js/9.2a9d54f3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c6292dad.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c9187ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon-128.png" alt="LipSurf Plugin Developer Documentation" class="logo"> <span class="site-name can-hide">LipSurf Plugin Developer Documentation</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/lipsurf/plugins" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/lipsurf/plugins" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/quick-start.html" class="sidebar-link">5 Minute Quick Start</a></li><li><a href="/architecture.html" class="sidebar-link">Architecture</a></li><li><a href="/glossary.html" class="sidebar-link">Glossary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dynamic-matching.html" class="sidebar-link">Match Patterns</a></li><li><a href="/contexts.html" class="sidebar-link">Contexts</a></li><li><a href="/langs.html" class="sidebar-link">Internationalization</a></li><li><a href="/plugin-level-settings.html" class="sidebar-link">Plugin-level Settings</a></li><li><a href="/testing.html" class="sidebar-link">Testing</a></li><li><a href="/recipes.html" class="sidebar-link">Recipes</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Support</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/help.html" class="sidebar-link">Get Help</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api-reference/plugin.html" class="sidebar-link">Plugin</a></li><li><a href="/api-reference/command.html" aria-current="page" class="active sidebar-link">Commands</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api-reference/command.html#command" class="sidebar-link">Command</a></li><li class="sidebar-sub-header"><a href="/api-reference/command.html#dynamicmatch" class="sidebar-link">DynamicMatch</a></li><li class="sidebar-sub-header"><a href="/api-reference/command.html#dynamicmatchfnresp" class="sidebar-link">DynamicMatchFnResp</a></li><li class="sidebar-sub-header"><a href="/api-reference/command.html#localizedcommand" class="sidebar-link">LocalizedCommand</a></li></ul></li><li><a href="/api-reference/pluginbase-util.html" class="sidebar-link">PluginBase.util</a></li><li><a href="/api-reference/test.html" class="sidebar-link">Test</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Enterprise</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api-reference/customstt.html" class="sidebar-link">Custom STT API</a></li><li><a href="/api-reference/script.html" class="sidebar-link">LipSurf.js</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="commands"><a href="#commands" class="header-anchor">#</a> Commands</h1> <h2 id="command"><a href="#command" class="header-anchor">#</a> Command</h2> <p>Each plugin has a list of commands.</p> <p>Also see <a href="/api-reference/command.html#localizedcommand"><code>LocalizedCommand</code></a>.</p> <p>Each command has the following properties:</p> <h3 id="name"><a href="#name" class="header-anchor">#</a> name</h3> <ul><li>Type:  <code>string</code></li></ul> <p>Friendly-name of the command (not necessarily the words used to call it). Should be title-cased.</p> <h3 id="match"><a href="#match" class="header-anchor">#</a> match</h3> <ul><li>Type:  <code>string | string[] |</code><a href="/api-reference/command.html#dynamicmatch"><code>DynamicMatch</code></a></li></ul> <p>The word(s) the user can say to execute this command. <br><br>Make sure it's completely lowercase and without any punctuation. Use &quot;#&quot; in the string as an ordinal place holder. Use &quot;*&quot; as a wildcard placeholder. Lastly, a function <a href="/api-reference/command.html#dynamicmatch"><code>DynamicMatch</code></a> can be used for the most advanced cases</p> <h3 id="description"><a href="#description" class="header-anchor">#</a> description</h3> <ul><li>Optional</li> <li>Type: <code>string</code></li></ul> <p>Detailed description visible in the options page.</p> <h3 id="global"><a href="#global" class="header-anchor">#</a> global</h3> <ul><li>Type: <code>boolean</code></li> <li>Default: <code>false</code></li></ul> <p>Let the command work on any page (not restricted by the <code>match</code> of the Plugin).</p> <h3 id="pagefn"><a href="#pagefn" class="header-anchor">#</a> pageFn</h3> <ul><li>Optional</li> <li>Type:  <code>(transcript: string, ...matchOutput: any) =&gt; Promise&lt;void&gt;</code></li></ul> <p>An async function to run on the page when the command is called. Special matches (<code>*</code> and <code>#</code>) will be arguments after the transcript string argument, and will come in the order they are specified in the match property. There will be a number argument if the match string accepts an ordinal (eg. has a <code>#</code>) in it, or a string argument if the match string accepts a wildcard (eg. has a <code>*</code> in it).<br><br>Optionally resolve the promise when this function is finished to help chaining work. Eg. we can use <code>return await PluginBase.util.sleep(500);</code> if we know a command will take no longer than 500ms to finish, and to only execute the next command in the chain after that 500ms delay.<br><br> Also see <a href="/api-reference/command.html#fn-vs-pagefn">fn vs. pageFn</a></p> <h3 id="nice"><a href="#nice" class="header-anchor">#</a> nice</h3> <ul><li><p>Optional</p></li> <li><p>Type:  <a href="/api-reference/command.html#nicecommand"><code>NiceCommand</code></a></p> <p>See <a href="/api-reference/command.html#nicecommand"><code>NiceCommand</code></a>.</p></li></ul> <h3 id="fn"><a href="#fn" class="header-anchor">#</a> fn</h3> <ul><li>Optional</li> <li>Type:  <code>(transcript: string, ...matchOutput: any) =&gt; Promise&lt;void&gt;</code></li></ul> <p>An async function that runs in the Chrome extension context when the command is called. First arg is the transcript that matched, rest of arguments are what's returned from the match command. <br><br>Resolve this promise when the command is done executing in order for chaining to work properly (if desired).<br><br> Also see <a href="/api-reference/command.html#fn-vs-pagefn">fn vs. pageFn</a>.</p> <h3 id="entercontext"><a href="#entercontext" class="header-anchor">#</a> enterContext</h3> <ul><li>Optional</li> <li>Type:  <code>string</code></li></ul> <p>What context to enter if this command matches.</p> <p>This is a sugar for writing:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> PluginBase<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">enterContext</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><p>See <a href="/contexts.html">Contexts</a> for details.</p> <h3 id="normal"><a href="#normal" class="header-anchor">#</a> normal</h3> <ul><li>Type: <code>boolean</code></li> <li>Default: <code>true</code></li></ul> <p>Make <code>false</code> if you don't wan't this command included in the &quot;Normal&quot; (default) context.</p> <p>See <a href="/contexts.html">Contexts</a> for details.</p> <h3 id="minconfidence"><a href="#minconfidence" class="header-anchor">#</a> minConfidence</h3> <ul><li>Optional</li> <li>Type: <code>number</code></li></ul> <p>A decimal between 0.0 and 1.0 that specifies the minimum confidence needed for this command to be considered a match. <br><br> Useful for lowering sensitivity of specific commands if they are relatively &quot;dangerous&quot; to execute, for example.</p> <h3 id="delay"><a href="#delay" class="header-anchor">#</a> delay</h3> <ul><li>Optional</li> <li>Type: <code>number | number[]</code></li></ul> <p>How long to wait for additional input for before executing this command. Overrides delay that is built-in for commands with match strings that end in ordinals or wildcards. <br><br> Useful for when you want to allow time for more words to come through. <br><br> Use an array with indices that correspond to the different match strings if you should have different delays based on the match string.<br><br>Use 0 to override dynamically calculated delay and to execute command immediately on match.</p> <h3 id="activedocument"><a href="#activedocument" class="header-anchor">#</a> activeDocument</h3> <ul><li>Type: <code>boolean</code></li> <li>Default: <code>false</code></li></ul> <p>Whether to execute this command in the focused frame or iFrame. Won't work if the final focus is document.body.</p> <h3 id="test"><a href="#test" class="header-anchor">#</a> test</h3> <ul><li>Optional</li> <li>Type:  <code>(t: ExecutionContext&lt;CommandTestContext&gt;, say: (s?: string) =&gt; Promise&lt;void&gt;, client: WebdriverIO.BrowserObject) =&gt; void</code></li></ul> <p><a href="https://github.com/avajs/ava">AVA</a> integration test for this command.</p> <h3 id="fn-vs-pagefn"><a href="#fn-vs-pagefn" class="header-anchor">#</a> <code>fn</code> vs. <code>pageFn</code></h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>pageFn</code> runs in the context of the page so it has access to the DOM, but doesn't have access to Chrome extension APIs like <code>chrome.tabs</code>. <code>fn</code> on the other hand runs in the (sandboxed) context of the Chrome extension; it doesn't have access to the page or it's DOM but it does have access to the Chrome extension APIs.</p></div> <h2 id="dynamicmatch"><a href="#dynamicmatch" class="header-anchor">#</a> DynamicMatch</h2> <ul><li>Type: <code>{description: string, fn: (transcript: string) =&gt;</code><a href="/api-reference/command.html#dynamicmatchfnresp"><code>DynamicMatchFnResp</code></a><code>}</code></li></ul> <p>A function and it's description. The function decides whether a command matches based on a transcript input for more dynamic command word possibilities.
Returns non-void if the command should execute on the given transcript. The description is used to inform the user what command words match.
It's seen in plugins list in the LipSurf options, and in the help.</p> <h2 id="dynamicmatchfnresp"><a href="#dynamicmatchfnresp" class="header-anchor">#</a> DynamicMatchFnResp</h2> <ul><li>Type: <code>[startMatchIndex: number, endMatchIndex: number, matchOutput?: any[]] | false | undefined</code> (or a <code>Promise</code> with the same result type).</li></ul> <p>The start match index, the end match index and an array of <code>any</code> type args to pass over to <code>pageFn</code> as the <code>...matchOutput: any[]</code> arguments. Don't include the transcript argument, as it's automatically included (and trimmed depending on the start and end match indices).</p> <div class="custom-block tip"><p class="custom-block-title">When to return false</p> <p>Return <code>false</code> or <code>Promise&lt;false&gt;</code> if there is a partial match. If there is a partial match we will delay other commands that might already want to execute.</p> <p>For example, imagine there's a command word for <span class="voice-cmd">reddit</span> and a <a href="/api-reference/command.html#dynamicmatch">dynamic match command</a> for <span class="voice-cmd">reddit message</span> that are both valid on a given page. If the user says <span class="voice-cmd">reddit message</span> the transcripts will come down the wire something like this:</p> <ul><li>red</li> <li>reddit</li> <li>read it</li> <li>read it mess</li> <li>reddit mess</li> <li>reddit message</li></ul> <p>Can you see the problem? Our &quot;reddit&quot; command will execute even though we only want &quot;reddit&quot; message to.</p> <p>If you don't want the first &quot;reddit&quot; command to match, return <code>false</code> when there is a partial match for the dynamic <span class="voice-cmd">reddit</span> command for transcripts that start with &quot;reddit&quot;.</p></div> <h2 id="localizedcommand"><a href="#localizedcommand" class="header-anchor">#</a> LocalizedCommand</h2> <p>See also <a href="/api-reference/command.html#command"><code>Command</code></a> and <a href="/api-reference/plugin.html#localizedplugin"><code>LocalizedPlugin</code></a>.</p> <h3 id="name-2"><a href="#name-2" class="header-anchor">#</a> name</h3> <ul><li>Type: <code>string</code></li></ul> <p>The original name of the command to match this localized version with.</p> <h3 id="match-2"><a href="#match-2" class="header-anchor">#</a> match</h3> <ul><li>Type: <code>string | string[] |</code><a href="/api-reference/command.html#dynamicmatch"><code>DynamicMatch</code></a></li></ul> <p>A localized command can match in a way independent from the base (en) command.</p> <h3 id="description-2"><a href="#description-2" class="header-anchor">#</a> description</h3> <ul><li>Optional</li> <li>Type: <code>string</code></li></ul> <h3 id="delay-2"><a href="#delay-2" class="header-anchor">#</a> delay</h3> <ul><li>Optional</li> <li>Type: <code>number | number[]</code></li></ul> <p>Delays for a localized version of a command can be completely different from the base English version.</p> <h3 id="nice-2"><a href="#nice-2" class="header-anchor">#</a> nice</h3> <ul><li>Optional</li> <li>Type: <code>string | ((transcript: string, ...matchOutput: any[]) =&gt; string)</code></li></ul> <p>Sometimes we want to adjust the transcript as it is shown on the live transcript. For example if the user says <span class="voice-cmd">go to are meal time videos</span> we would want to show that as <span class="voice-cmd">go to r/mealtimevideos</span>.</p> <p>Returns the complete &quot;live transcript&quot; that should be shown. <code>rawInput</code> is the transcript (eg. &quot;go to are meal time videos&quot;) <code>matchOutput</code> is an array returned from the match command if <a href="/api-reference/command.html#dynamicmatch"><code>DynamicMatch</code></a>is used.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/lipsurf/plugins/edit/master/docs/api-reference/command.md" target="_blank" rel="noopener noreferrer">Improve this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last updated:</span> <span class="time">10/8/2020, 2:38:33 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api-reference/plugin.html" class="prev">
        Plugin
      </a></span> <span class="next"><a href="/api-reference/pluginbase-util.html">
        PluginBase.util
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.31a506d3.js" defer></script><script src="/assets/js/3.c7b5409f.js" defer></script><script src="/assets/js/12.8e55b08a.js" defer></script>
  </body>
</html>
